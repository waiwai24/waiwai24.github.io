<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title># 常见的并发问题,常见的并发问题</title>
    <link rel="stylesheet" href="../../../../assets/css/notes.min.css">
</head>
<body>
    <div id="header-placeholder"></div>
    <div class="main-content-wrapper">
        <main class="content">
            <h1>常见的并发问题</h1>
<h2>1.非死锁缺陷</h2>
<h3>1.1 违反原子性缺陷</h3>
<p>访问临界区，未加锁，通过加锁解决</p>
<h3>1.2 违反顺序缺陷</h3>
<p>通过加条件变量保证执行顺序</p>
<h2>2.死锁</h2>
<p><img src="/0101/CSNote/操作系统/并发/assets/6.%E5%B8%B8%E8%A7%81%E7%9A%84%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98/image-20241015145121002.png" alt="image-20241015145121002"></p>
<ul>
<li>概念：在一个进程集合中，每个进程都在等待另外的进程释放资源（资源也可以是锁），而这些释放事件又必须由这个进程集合中的进程运行来产生，就称该进程集合处于死锁状态</li>
<li>死锁的四个必要条件：
<ul>
<li>互斥占用：存在必须互斥使用的资源</li>
<li>持有并等待：存在占有资源而又等待其他资源的进程</li>
<li>非抢占：进程占有的资源未释放时不可以被抢占</li>
<li>循环等待：存在一个资源等待的依赖环</li>
</ul>
</li>
<li>死锁的预防和避免：（破坏死锁的四个必要条件之一即可）</li>
<li>死锁的检查与恢复：允许死锁偶尔发生，出现问题后再行动（<strong>重启</strong>）
<ul>
<li>定期运行死锁检测器</li>
<li>检查资源图</li>
<li>死锁时，重启系统</li>
</ul>
</li>
</ul>
<h2>3.资源分配图</h2>
<p>资源分配图G = (V, E):</p>
<ul>
<li>顶点集V=P∪R
<ul>
<li>P为进程集合，P= {P1, P2, …, Pn}，圆圈表示</li>
<li>R为资源类集合，R= {R1, R2, …, Rn}，方框表示</li>
<li>资源实例的数量则用方框内圆点表示</li>
</ul>
</li>
<li>边集合E
<ul>
<li>请求边(Pi, Ri)，表示进程Pi请求一个Ri资源</li>
<li>分配边(Ri, Pi)，表示进程Pi占有一个Ri资源</li>
</ul>
</li>
</ul>
<p>资源分配图可以判断是否存在潜在死锁</p>
<p>警察人质问题：</p>
<p><img src="/0101/CSNote/操作系统/并发/assets/6.%E5%B8%B8%E8%A7%81%E7%9A%84%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98/image-20241201092914612.png" alt="image-20241201092914612"></p>
<p>图中有环就不一定就存在死锁：</p>
<p>如下图若P3释放后接下来再P2，P1，这样就不会存在死锁了：</p>
<p><img src="/0101/CSNote/操作系统/并发/assets/6.%E5%B8%B8%E8%A7%81%E7%9A%84%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98/image-20241201093207080.png" alt="image-20241201093207080"></p>

        </main>
    </div>
    <footer class="footer">
        <p>&copy; 2024 waiwai24. All rights reserved.</p>
    </footer>
    <script src="../../../../assets/js/header.js"></script>
    <script src="../../../../assets/js/include-header.js"></script>
</body>
</html>