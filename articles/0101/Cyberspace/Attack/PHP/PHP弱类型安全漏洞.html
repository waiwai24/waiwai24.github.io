<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title># PHP弱类型安全漏洞,PHP弱类型安全漏洞</title>
    <link rel="stylesheet" href="../../../../assets/css/notes.min.css">
</head>
<body>
    <div id="header-placeholder"></div>
    <div class="main-content-wrapper">
        <main class="content">
            <h1>PHP弱类型安全漏洞</h1>
<blockquote>
<p>由于php是弱类型语言，不用在变量前面加类型，因此容易发生变量的类型转换问题，并产生许多意想不到的问题，我们可以在任何地时候将变量赋值给任意的其他类型的变量，同时变量也可以转换成任意地其他类型的数据</p>
</blockquote>
<blockquote>
<p>题目：</p>
<ul>
<li>攻防世界Web_php_include</li>
</ul>
</blockquote>
<h2>1.PHP中的比较运算符</h2>
<table>
<thead>
<tr>
<th>例子</th>
<th>名称</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>$a == $b</td>
<td>等于</td>
<td><strong><code>TRUE</code></strong>，如果类型转换后 $a 等于 $b。</td>
</tr>
<tr>
<td>$a===$b</td>
<td>全等</td>
<td><strong><code>TRUE</code></strong>，如果 $a 等于 $b，并且它们的==类型也相同==。</td>
</tr>
<tr>
<td>$a != $b</td>
<td>不等</td>
<td><strong><code>TRUE</code></strong>，如果类型转换后 $a 不等于 $b。</td>
</tr>
<tr>
<td>$a &lt;&gt; $b</td>
<td>不等</td>
<td><strong><code>TRUE</code></strong>，如果类型转换后 $a 不等于 $b。</td>
</tr>
<tr>
<td>$a !== $b</td>
<td>不全等</td>
<td><strong><code>TRUE</code></strong>，如果$a 不等于 $b，或者它们的类型不同。</td>
</tr>
<tr>
<td>$a &lt; $b</td>
<td>小与</td>
<td><strong><code>TRUE</code></strong>，如果 $a 严格小于 $b。</td>
</tr>
<tr>
<td>$a &gt; $b</td>
<td>大于</td>
<td><strong><code>TRUE</code></strong>，如果 $a 严格大于 $b。</td>
</tr>
<tr>
<td>$a &lt;= $b</td>
<td>小于等于</td>
<td><strong><code>TRUE</code></strong>，如果 $a 小于或者等于 $b。</td>
</tr>
<tr>
<td>$a &gt;= $b</td>
<td>大于等于</td>
<td><strong><code>TRUE</code></strong>，如果 $a 大于或者等于 $b。</td>
</tr>
<tr>
<td>$a &lt;=&gt; $b</td>
<td>太空船运算符（组合比较符）</td>
<td>当$a小于、等于、大于$b时,分别返回一个小于、等于、大于0的[integer] 值。PHP7开始提供.</td>
</tr>
</tbody>
</table>
<h2>2.类型转换规则</h2>
<blockquote>
<p>变量声明时不需要定义类型，变量的类型由存储的值决定，PHP可能会尝试在某些上下文中自动将值转换为另一种类型</p>
</blockquote>
<h3>2.1 Numeric</h3>
<p>当使用算数运算符时，任一对象为<code>float</code>，则两个运算对象和结果都将解释为<code>float</code>，否则，全部解释成int。</p>
<p>自PHP8.0开始，如果无法解释其中一个运算对象，则会抛出 <code>TypeError</code></p>
<h3>2.2 String</h3>
<p>当使用echo，print时值会解释成<code>string</code></p>
<h3>2.3 Logical</h3>
<p>当使用条件，逻辑语句时值会解释成<code>bool</code></p>
<h3>2.4 Integral &amp; String</h3>
<p>当使用位运算符时，如果所有的运算对象都是<code>string</code>,那运算结果也是<code>string</code>，否则都将解释为<code>int</code></p>
<h3>2.5 ==Comparative==</h3>
<table>
<thead>
<tr>
<th>运算数 1 类型</th>
<th>运算数 2 类型</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.php.net/manual/zh/language.types.null.php">null</a> 或 <a href="https://www.php.net/manual/zh/language.types.string.php">string</a></td>
<td><a href="https://www.php.net/manual/zh/language.types.string.php">string</a></td>
<td>将 <strong><code>null</code></strong> 转换为 “”，进行数字或词汇比较</td>
</tr>
<tr>
<td><a href="https://www.php.net/manual/zh/language.types.boolean.php">bool</a> 或 <a href="https://www.php.net/manual/zh/language.types.null.php">null</a></td>
<td>任何其它类型</td>
<td>转换为 <a href="https://www.php.net/manual/zh/language.types.boolean.php">bool</a>，<strong><code>false</code></strong> &lt; <strong><code>true</code></strong></td>
</tr>
<tr>
<td><a href="https://www.php.net/manual/zh/language.types.object.php">object</a></td>
<td><a href="https://www.php.net/manual/zh/language.types.object.php">object</a></td>
<td>内置类可以定义自己的比较，不同类不能比较，相同的类查看<a href="https://www.php.net/manual/zh/language.oop5.object-comparison.php">对象比较</a></td>
</tr>
<tr>
<td><a href="https://www.php.net/manual/zh/language.types.string.php">string</a>、<a href="https://www.php.net/manual/zh/language.types.float.php">float</a>、<a href="https://www.php.net/manual/zh/language.types.resource.php">resource</a>、<a href="https://www.php.net/manual/zh/language.types.integer.php">int</a></td>
<td><a href="https://www.php.net/manual/zh/language.types.string.php">string</a>、<a href="https://www.php.net/manual/zh/language.types.float.php">float</a>、<a href="https://www.php.net/manual/zh/language.types.resource.php">resource</a>、<a href="https://www.php.net/manual/zh/language.types.integer.php">int</a></td>
<td>将字符串和资源转换成数字，按普通数学比较</td>
</tr>
<tr>
<td><a href="https://www.php.net/manual/zh/language.types.array.php">array</a></td>
<td><a href="https://www.php.net/manual/zh/language.types.array.php">array</a></td>
<td>成员越少的数组越小，如果运算数 1 中的键不存在于运算数2 中则数组无法比较，否则挨个值比较</td>
</tr>
<tr>
<td><a href="https://www.php.net/manual/zh/language.types.object.php">object</a></td>
<td>任何其它类型</td>
<td><a href="https://www.php.net/manual/zh/language.types.object.php">object</a> 总是更大</td>
</tr>
<tr>
<td><a href="https://www.php.net/manual/zh/language.types.array.php">array</a></td>
<td>任何其它类型</td>
<td><a href="https://www.php.net/manual/zh/language.types.array.php">array</a> 总是更大</td>
</tr>
</tbody>
</table>
<p>常见例子：</p>
<pre><code class="language-php">// Bool 和 null 总是作为 bool 比较
var_dump(1 == TRUE);  // TRUE - same as (bool)1 == TRUE
var_dump(0 == FALSE); // TRUE - same as (bool)0 == FALSE
var_dump(100 &lt; TRUE); // FALSE - same as (bool)100 &lt; TRUE
var_dump(-10 &lt; FALSE);// FALSE - same as (bool)-10 &lt; FALSE

//string与int
var_dump(0 == &quot;a&quot;); // 0 == 0 -&gt; true
var_dump(&quot;1&quot; == &quot;01&quot;); // 1 == 1 -&gt; true
var_dump(100 == &quot;10a0&quot;); // 100 == 10 -&gt; false （string从前往后取数字遇到非e的就停了）
var_dump('123'==123); //true
var_dump('abc'==0); //true
var_dump('123a'==123); //true


//科学计数法 e或E是exponent(指数)的缩写
//如果遇到了0e+纯数字这种类型的字符串，就会将此字符串解析为科学计数法。如果不满足0e+纯数字这种类型就不会相等
var_dump(&quot;10&quot; == &quot;1e1&quot;); // 10 == 10 -&gt; true 
var_dump(100 == &quot;1e2&quot;); // 100 == 100 -&gt; true
var_dump(&quot;0e1abc&quot;==&quot;0&quot;); //false
var_dump(&quot;0e1314a&quot; == &quot;0e520b&quot;); //false
var_dump('0e123456789'=='0e987654321'); //true
    
//0x00标识的十六进制
var_dump('0x01'==1); //true
var_dump(&quot;10&quot;==&quot;0x0a&quot;); //true
var_dump(&quot;0x1e240&quot;==123456); //true
var_dump(&quot;0x1e240&quot;==&quot;1e240&quot;); //false

//其他
''==0==false==NULL
[false] ==[0]==[NULL]==[''] //标识数组
true == 1
</code></pre>
<p>注意：==具体的实际情况要根据php的版本来判定==（eg：PHP8.2运行string与int的最后两个实例都会显示false，PHP7.4运行上述的十六进制会都显示false）</p>

        </main>
    </div>
    <footer class="footer">
        <p>&copy; 2024 waiwai24. All rights reserved.</p>
    </footer>
    <script src="../../../../assets/js/header.js"></script>
    <script src="../../../../assets/js/include-header.js"></script>
</body>
</html>