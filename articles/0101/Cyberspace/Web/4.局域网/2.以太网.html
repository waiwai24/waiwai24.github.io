<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title># 以太网,以太网</title>
    <link rel="stylesheet" href="/assets/css/notes.min.css">
</head>
<body>
    <div class="main-content-wrapper">
        <main class="content">
            <h1>以太网</h1>
<blockquote>
<p>无连接，不可靠的服务</p>
</blockquote>
<h2>1.以太网概述</h2>
<ul>
<li>以太网是符合IEEE 802.3标准的局域网</li>
<li>ALOHA的介质是电磁波， 以太网的介质是电缆</li>
<li>ALOHA历史：
<ul>
<li>“ALOHA”原为美国夏威夷地区人们相互之间的问候语，上世纪70年代夏威夷大学的一项研究项目取其为名，得到了如今的ALOHA协议（又称ALOHA系统、ALOHA网）。该协议原先旨在解决夏威夷群岛各个岛屿间的通信问题，是最早最基本的无线数据传输协议</li>
<li>ALOHA的通信机制非常简单：网络中发送端发起传输请求（Transmit Request）后即可立即发送数据，不存在授权信号（GRANT），也不需要在发送前检查线路（Channel）是否空闲。接收端在成功接收数据之后返回一个ACK信号，通知发送端传输成功</li>
<li>由此带来的问题也非常明显：如果多个节点同时传输数据，线路内的数据将会发生冲突，导致数据出错。这种情况下接收端不发送ACK信号，发送端则在一段时间后重新发送数据，直到接收到ACK信号为止。可想而知，在冲突发生频率高的情况下，信号传输延迟可能变得非常大，传输效率非常低</li>
</ul>
</li>
</ul>
<h2>2.以太网物理层</h2>
<ul>
<li>
<p>双绞线介质，以Hub （集线器）为中心节点</p>
</li>
<li>
<p>拓扑结构为星形，逻辑上仍然是总线形</p>
</li>
<li>
<p>集线器hub</p>
<ul>
<li>
<p>多端口转发器，主要功能是将<strong>信号放大</strong>并整形后再转发，消除信号传输的失真和衰减。属于物理层设备(工作在物理层)。</p>
</li>
<li>
<p>Hub主要用于小型LAN</p>
</li>
</ul>
</li>
</ul>
<h2>3.MAC子层协议</h2>
<h3>3.1 广播信道的信号传输</h3>
<blockquote>
<p><strong>以太网采用广播方式发送</strong></p>
</blockquote>
<ul>
<li>好处：任意一个主机传输的数据都能够到达 所有其它主机</li>
<li>坏处： 所有这些主机竞争访问同一条链路 ，称它们处在同一个冲突域（collision  domain）中</li>
</ul>
<h3>3.2 ALOHA协议</h3>
<ul>
<li>
<p>纯ALOHA评价 ：</p>
<ul>
<li>
<p>反馈时间比较长</p>
</li>
<li>
<p>信道利用率&lt;= 18</p>
</li>
</ul>
</li>
<li>
<p>分槽（Slotted）ALOHA l</p>
<ul>
<li>站点发送数据时等待时间片的开始</li>
<li>避免用户发送的随意性，连续ALOHA变成离散 ALOHA</li>
</ul>
</li>
<li>
<p>分槽ALOHA评价</p>
</li>
<li>
<p>如果时间片的定义不合适，可能发送过程中还存 在冲突</p>
</li>
<li>
<p>信道利用率达到36%</p>
</li>
<li>
<p>ALOHA总体评价</p>
<ul>
<li>站点发送数据时没有考虑其他站点是否正在发送</li>
<li>如果检测到其他站点在做什么，从而调整自己的 动作，可以提高信道的利用率</li>
</ul>
</li>
</ul>
<h3>3.3 CSMA协议</h3>
<blockquote>
<p>载波侦听多路访问协议CSMA (Carrier Sense Multiple Access),在ALOHA的基础上加入了数据传输前的线路检查</p>
</blockquote>
<h4>3.3.1 基本流程</h4>
<ul>
<li>某站点要发送数据时，先<strong>侦听信道</strong>；</li>
<li>如果空闲，则以概率P发送数据，以概率1-P推迟到下一个时间片，然后侦听信道</li>
<li>如果信道忙，则等下一个时间片，然后侦听信道；</li>
<li>重复上述过程，直到数据发送完</li>
</ul>
<h4>3.3.2 三种基本方案</h4>
<ul>
<li>
<p>1-坚持CSMA  ：</p>
<blockquote>
<p>该方案相当于p持续性方案中p=1的情况，当发送端发起传输请求时，检查线路是否空闲，若空闲，则立即传输；若忙碌，则持续检查线路状态，直到线路空闲时无条件发送数据（p=1）。如果出现传输冲突，则发送端等待一段随机长度时间后再开始上述过程。1持续性方案用于CSMA/CD系统，如以太网（Ethernet）</p>
</blockquote>
</li>
<li>
<p>非坚持CSMA</p>
<blockquote>
<p>发送端的每次传输请求，都先检查线路是否空闲，若空闲，则立刻传输数据；若线路忙碌，则等待一段随机长度的时间后再重新尝试传输，以避免多个发送端同时提起发送请求的情况。并且每一次迭代都将增加等待时间的长度</p>
</blockquote>
</li>
<li>
<p>P-坚持CSMA</p>
<blockquote>
<p>对于发送端的每次传输请求，都先检查线路是否空闲，若空闲，则存在两种情况，一种为立即发送数据（概率为p）；另一种则为延后一段固定的时间后再重新尝试传输（概率为1-p）。而如果线路忙碌，则持续等待，直到线路空闲后再开始上述过程。p持续性方案用于CSMA/CA系统，如WIFI以及其他封包无线电系统</p>
</blockquote>
</li>
</ul>
<p>三种CSMA是否完全避免了冲突呢？</p>
<p>例：站点A在发送数据，但由于信道的传播 时延，数据还未到达站点B，此时站点B要 发送数据，它侦听到信道是空闲的，于是 也开始发送数据，从而发生冲突</p>
<p>结论：在CSMA中冲突是不可避免的，必须进行冲突检测和处理！</p>
<h3>3.4 CSMA/CD</h3>
<blockquote>
<p>具有冲突检测的载波侦听多路访问协议CSMA/CD(CSMA With Collision Detection）</p>
<p>总结：先听后发、边听边发、随机延迟后重发</p>
</blockquote>
<p>基本思想：</p>
<ul>
<li>某站点想要发送数据时，它必须先要<strong>侦听信道</strong></li>
<li>如果信道空闲，立即发送数据，并进行<strong>冲突检测</strong></li>
<li>如果忙碌，继续侦听信道，直到变为空闲，立即发送数据，并进行<strong>冲突监测</strong></li>
<li>如果在发送数据的过程中检测到冲突，立即停止发送数据，并等待<strong>随机长</strong>（非坚持CSMA）的时间（指数回退算法），重新监听信道</li>
<li>当尝试到规定的次数时将放弃尝试并向主机报告错误</li>
</ul>
<p><strong>信道浪费的时间=检测冲突所需要的时间</strong></p>
<h3>3.5 MAC地址</h3>
<ul>
<li>mac地址（物理地址）： IEEE802标准为每个厂商生产的网卡规定了一个 48位的全局地址，它是站点的全球唯一的标识符 ，与其物理位置无关</li>
<li>MAC地址为6Byte: 00-11-25-B2-B8-65
<ul>
<li>前3个字节（高24位）由IEEE统一分配给厂商 l</li>
<li>低24位由厂商分配给每一块网卡</li>
</ul>
</li>
<li>分类：
<ul>
<li>广播地址：全1，让局域网所有的设备接收到同一个帧</li>
<li>组播地址：第40位位1，控制局域网的不放呢设备接收到同一个帧</li>
<li>单播地址：某个特定网卡的地址</li>
</ul>
</li>
</ul>

        </main>
    </div>
</body>
</html>