# 载荷暂存

## 1.web 服务器

有效负载一直直接存储在二进制文件中。这是一种获取有效负载的快速且常用的方法。不幸的是，在某些存在有效负载大小限制的情况下，将有效负载保存在代码中并不是一种可行的办法。替代方案是在 Web 服务器上托管有效负载，并在执行期间获取它

为了从 Web 服务器获取 Payload，将使用以下 Windows API：

- InternetOpenW：打开 Internet 会话句柄，这是使用其他 Internet Windows API 的先决条件
- InternetOpenUrlW： 针对指定资源（即 Payload 的 URL）打开句柄
- InternetReadFile：从 Web 资源句柄读取数据。这是由 InternetOpenUrlW 打开的句柄
- InternetCloseHandle：关闭句柄
- InternetSetOptionW：设置 Internet 选项

## 2.windows 注册表