# ClaudeCode指南

## 1.常用指令

使用前 claude update 更新到最新版

| 命令              | 功能                         | 示例                              |
| ----------------- | ---------------------------- | --------------------------------- |
| claude            | 启动交互模式                 | claude                            |
| claude "task"     | 运行一次性任务               | claude "fix the build error"      |
| claude -p "query" | 运行一次性查询，然后退出     | claude -p "explain this function" |
| claude -c         | 继续最近的对话               | claude -c                         |
| claude -r         | 恢复之前的对话               | claude -r                         |
| claude commit     | 创建 Git 提交                | claude commit                     |
| /clear            | 清除聊天上下文               |                                   |
| /compact          | 压缩对话历史，减少上下文占用 |                                   |
| esc               | 立即停止当前ai任务           |                                   |



## 2.CLAUDE.md

Rules文件，规定了AI怎样生成代码。你可以在里面指定代码风格、开发环境、仓库规范等等，可以在根目录或者子目录都配置，为每个上下文提供个性化配置

主要功能是记录：

- 项目背景：项目的目的、技术栈和架构
- 关键命令：用于构建、代码检查和测试项目的 Shell 命令
- 编码规范：风格指南、命名约定和必需的格式
- 工作流程：关于测试、创建拉取请求或处理 Git 分支的说明
- 仓库特定怪癖：项目特有的任何异常行为或设置要求

可以使用 /init 命令自动初始化分析创建一个，也可以手动创建

示例：

~~~markdown
# CLAUDE.md - Rust 项目开发指南

此文件为 Claude Code 在此 Rust 项目仓库中的工作提供指导。

## 1. 仓库概览

此代码仓库包含一个使用 Rust 编写的项目，旨在提供高效、可扩展的功能。项目依赖于 Cargo 构建工具，源代码托管在 GitHub 上。

## 2. 关键命令

* **本地开发**：使用 Cargo 启动开发服务器：

  ```bash
  cargo run
  ```
* **运行测试**：使用 Cargo 运行测试：

  ```bash
  cargo test
  ```
* **代码检查**：使用 Clippy 进行静态代码检查：

  ```bash
  cargo clippy
  ```
* **构建项目**：构建项目并生成可执行文件：

  ```bash
  cargo build
  ```

## 3. 代码风格与约定

* **模块语法**：应使用 Rust 的标准模块语法，通过 `mod` 和 `use` 语句组织和导入模块。
* **错误处理**：所有错误处理应使用 `Result` 类型，并且优先考虑使用 Rust 的 `?` 运算符。
* **样式**：请遵循 Rust 官方的编码风格，并使用 `rustfmt` 格式化代码：

  ```bash
  cargo fmt
  ```
* **注释**：请使用文档注释 (`///`) 来描述公开 API 和重要功能。

## 4. 工作流程

* **测试**：进行更改时，优先运行单个测试，而不是整个测试套件。如果更改影响了多个模块，务必确保覆盖新的代码路径。

  ```bash
  cargo test <test_name>
  ```
* **提交新功能**：添加新功能时，请创建新的模块或文件，并在 `src/` 文件夹下组织代码。
* **Git 提交**：所有提交信息必须遵循约定式提交（Conventional Commits）规范
* **版本管理**：请在每次提交后运行 `cargo update`，确保依赖项为最新版本。

## 5. 依赖管理

* **添加依赖**：使用 Cargo 添加新的依赖时，请使用以下命令：

  ```bash
  cargo add <dependency_name>
  ```
* **版本锁定**：Rust 项目使用 `Cargo.toml` 和 `Cargo.lock` 文件进行依赖管理。请确保依赖项的版本号在提交时已锁定。

## 6. 编译与性能

* **构建项目**：使用 `cargo build` 来构建项目，默认在 `debug` 模式下编译。要在 `release` 模式下编译，使用：

  ```bash
  cargo build --release
  ```
* **性能优化**：在编译时，使用 Rust 的优化选项来提高性能，特别是在 `release` 模式下。
* **内存管理**：Rust 语言本身避免了 GC（垃圾回收），要注意优化内存使用，尤其是在大规模数据处理时。

## 7. 个人备注

* 如果遇到困难，请停下来寻求帮助。我是 waiwai，随时为您提供支持。
~~~



## 3.工作流

通用：

- 探索：要求 Claude 阅读相关文件、图片或 URL，但明确指示它暂时不要编写任何代码
- 规划：让 Claude 制定解决问题的计划。使用“think”、“think hard”或“ultrathink”等关键词，可以给予 Claude 更多的计算时间来评估不同方案
- 编码：在确认计划后，让 Claude 开始实施
- 提交：最后，让 Claude 提交代码、创建 PR，并更新相关文档

测试开发：

- 编写测试：让 Claude 根据预期输入输出编写测试用例
- 确认失败：运行测试，确保它们因功能未实现而失败
- 提交测试：将测试用例提交到版本控制
- 实现功能：指示 Claude 编写能通过所有测试的代码，并在此过程中不断迭代
- 提交代码：在所有测试通过后，提交最终实现

视觉驱动开发：

- 提供截图工具：通过 Puppeteer MCP 服务器或 iOS 模拟器 MCP 服务器，让 Claude 能够截取浏览器或应用的界面
- 提供视觉稿：通过粘贴、拖拽或文件路径的方式，将设计稿图片提供给 Claude
- 迭代实现：要求 Claude 编写代码、截图、比对视觉稿，并循环迭代直至结果匹配
- 提交：满意后提交代码。