# ARP协议

> 地址解析协议 Address Resoultion Protocol



## 1.作用

以太网环境中，数据的传输所依懒的是MAC地址而非IP地址，而将已知**IP地址转换为MAC地址**的工作是根据ARP协议



## 2.工作流程

假设主机A和B在同一个网段，主机A要向主机B发送信息：

* 主机A首先查看自己的ARP表
* 如果主机A在ARP表中找不到对应的MAC地址，则将缓存该数据报文，然后以广播方式发送一个ARP请求报文
* 主机B比较自己IP地址和ARP请求报文中的 目标IP 地址，当两者相同时进行如下处理：将ARP请求报文中的发送端（即主机A）的IP地址和MAC地址存入自己的ARP表中，之后以单播方式发送ARP响应报文给主机A，其中包含了自己的MAC地址
* 主机A收到ARP响应报文后，将主机B的MAC地址加入到自己的ARP表中以用于后续报文的转发，同时将IP数据包进行封装后发送出去



## 3.代理ARP

用于两个主机不在同一个网络内，代理ARP就是通过使用一个主机(通常为router)，来作为指定的设备使用自己的 MAC 地址来对另一设备的ARP请求作出应答