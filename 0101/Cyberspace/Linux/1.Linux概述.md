# Linux概述

## 1.内核版本

格式：主版本号.次版本号.修订次数

次版本如果是偶数说明是稳定版本，奇数为开发版，有较多的生产bug，不适合用于生产环境



## 2.文件系统

> linux中万物皆文件

![d0c50-linux2bfile2bsystem2bhierarchy](./assets/1.Linux概述/d0c50-linux2bfile2bsystem2bhierarchy.jpg)

### 2.1 一级目录

根目录

### 2.2 二级目录

- /bin：放置的是在单人维护模式下还能够被操作的指令。在/bi底下的指令可以被root与一般账号所使用
- /boot：这个目录主要在放置开机会使用到的文件，包括Liux核心文件以及开机选单与开机所需配置文件等。
- /dev：在Liux系统上，任何装置与接口设备都是以文件的型态存在于这个目录当中的。
- /etc：系统主要的配置文件几乎都放置在这个目录内，例如人员的账号密码文件、各种服务的启始档等。
- /home：这是系统默认的用户家目录(home directory)。
- /lib：放置的则是在开机时会用到的函式库，以及在bin或/sbi底下的指令会呼叫的函式库
- /media：放置的是可移除的装置，包括软盘、光盘、DVD等等装置都暂时挂载于此。
- /mnt：用于挂载其他临时文件系统，例如分别用于 CD-ROM 驱动器和软盘驱动器的 CDROM 和软盘。
- /opt：给第三方协力软件放置的目录。
- /proc：一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件，用户可以通过这些文件查看有关系统硬件及当前正在运行进程的信息，甚至可以通过更改其中某些文件来改变内核的运行状态。
- /root：系统管理员(root)的家目录。
- /sbin：放在/sbi底下的为开机过程中所需要的，里面包括了开机、修复、还原系统所需要的指令。
- /srv：srv 可以视为『service』的缩写，是一些网络服务启动之后，这些服务所需要取用的数据目录。
- /tmp：这是让一般使用者或者是正在执行的程序暂时放置文件的地方。
- /var：var 是 varible 的简写。目录中保存的是未知增长和其内容频繁变动的文件。

### 2.3 三级目录

- /usr/lib：包含各应用软件的函式库、目标文件(object file),以及不被一般使用者惯用的执行档或脚本。
- /usr/local：系统管理员在本机自行安装自己下载的软件（非distribution默认提供者），建议安装到此目录，这样会比较便于管理。
- /var/lib：程序本身执行的过程中，需要使用到的数据文件放置的目录。
- var/log(重要)：登录文件放置的目录，里面比较重要的文件如var/log/messages,var/log/wtmp(记录登入者的信息)等。
- /etc/init.d/：所有服务的预设启动script都是放在这里的。



## 3.重要文件

### 3.1 /etc/passwd 文件

> `/etc/passwd`文件是全局可读的，任何用户都可以查看其中的信息
>
> 密码字段通常是一个单独的字符，通常是`x`，表示密码哈希值已被移动到了`/etc/shadow`文件

格式：

```markdown
用户名:密码:UID:GID:用户全名:用户主目录:用户shell
//UID为0是root用户，UID为1-99的用户是预定义的账户，UID为100-999的用户是系统和管理账户

# cat /etc/passwd
root:x:0:0:Super User:/root:/bin/bash
```



### 3.2 /etc/shadow 文件

> shadow文件为可读文件，普通用户没有读写权限，超级用户拥有读写权限
>
> 影子文件是存储帐户信息的非常安全的地方。 passwd 文件中的强用户密码存在安全问题。使 Shadow 文件可由 root 读取只能消除恶意用户和攻击者利用密码的机会

格式：

```markdown
用户名:密码:最后一次修改密码时间:最小修改密码间隔:最大修改密码间隔:密码过期前警告天数:密码过期后宽限时间:账户失效期:保留字段
//天数是用用1970年1月1日以来的天数表示

# cat /etc/shadow
root:$y$j9T$eJkFneT2rP80dgJGMRwP9.$LVbSGR.NyicgIJhUQevvO8mLbAbkDSGxDmPnNoqY6J6:19891:0:99999:7:::
bin:*:19807:0:99999:7:::
```

密码格式：

```markdown
1.该列留空，即"::"，表示该用户没有密码。
2.该列为"!"，即":!:"，表示该用户被锁，被锁将无法登陆，但是可能其他的登录方式是不受限制的，如ssh公钥认证的方式，su的方式。
3.该列为"*"，即":*:"，也表示该用户被锁，和"!"效果是一样的。
4.该列以"!"或"!!"开头，则也表示该用户被锁。
5.该列为"!!"，即":!!:"，表示该用户从来没设置过密码。
6.如果格式为"$type$salt$hashed"，则表示该用户密码正常。type是加密算法的标识符，salt是随机生成的字符串，hashed是明文密码和salt通过crypt函数加密后的结果
type:
  1 代表采用了MD5加密方式
  2 Blowfish，是最早的版本，有一些缺陷，不推荐使用
  2a Blowfish，是修复了一些缺陷后的版本，但仍然有一些问题，不推荐使用
  2b Blowfish，是修复了2a中的问题后的版本，是安全、常用的版本
  2y Blowfish，Eksblowfish版本
  y 是Yescrypt加密方式的前缀，是Blowfish加密方式的一个变种，提供了更高的安全性和性能
  5 代表采用了SHA256加密方式
  6 代表采用了SHA512加密方式
```

