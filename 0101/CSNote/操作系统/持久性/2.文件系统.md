# 文件系统

## 1.文件概念

文件就是一个线性字节数组

* 每个文件都有一个低级名称：indoe number（ls -i 查看）
* 每个文件都有一个用户可读名称（文件名）
* 文件的主要属性存放在文件控制块（FCB）里（state filename）
  * 创建者
  * 文件物理位置信息
  * 创建，修改，保存时间
  * 口令
  * 访问权限



## 2.文件的逻辑结构

字节流文件：文件被OS看作可按字节访问的空间

文件数据可以顺序存放在外存，也可以将字节流等分成逻辑块，不连续存放于外存（类比页式存储系统的页)

文件的访问方式：

* 顺序访问：程序依次访问文件信息，文件系统用表格记录文件访问的当前逻辑位置offset
* 直接访问：程序在读/写文件前给出要访问信息的逻辑位置offset,由文件系统将逻辑位置转换成物理块并进行访问



## 3.文件的物理结构

外存的物理特性：

* 磁带、光盘：顺序访问设备，要求文件连续存放
* 磁盘、flash盘：直接访问设备，文件可连续或不连续的存放于设备上

物理存储方法：

* 连续结构：文件顺序连续存放在外存中，文件难以动态增长，会产生大量外部碎片
* 链接结构：文件按块不连续存放，使用指针按数据顺序链接起来，访问开销大，随机访问非常耗时
* 索引结构：文件按块不连续存放，使用索引表定位文件数据块，单级索引分配导致索引表需要大量的连续空间
* 多级索引：当索引表过大，可以组织多级索引