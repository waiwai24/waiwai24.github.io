# 数组

> 数组array是一种线性数据结构，将相同类型元素存储在连续的内存空间中，元素在数组的位置称为索引index



## 1.数组常用操作

### （1）初始化数组

```cpp
// 存储在栈上
int arr[5];
int nums[5] { 1, 3, 2, 5, 4 };
// 存储在堆上（需要手动释放空间）
int* arr1 = new int[5];
int* nums1 = new int[5] { 1, 3, 2, 5, 4 };
```



### （2）访问元素

数组的元素是存储在连续的内存空间中，给定数组内存地址（即首元素内存地址）和某个元素的索引，就可以得到该元素的内存地址，从而访问该元素

数组中访问元素是非常高效的，我们可以在 $O(1)$ 时间内随机访问数组中的任意一个元素



### （3）插入元素

由于数组元素在内存中是“紧挨着的”，他们之间没有空间再存放任何数据，故要在数组间插入一个元素，就要把该元素之后的所有元素后移一位

由于数组的长度是固定的，因此插入一个元素必定会导致数组尾部元素的丢失

```cpp
/* 在数组的索引 index 处插入元素 num */
void insert(int *nums, int size, int num, int index) {
    // 把索引 index 以及之后的所有元素向后移动一位
    for (int i = size - 1; i > index; i--) {
        nums[i] = nums[i - 1];
    }
    // 将 num 赋给 index 处元素
    nums[index] = num;
}
```



### （4）删除元素

同插入，把删除元素之后的元素都前移一位

```cpp
/* 删除索引 index 处元素 */
void remove(int *nums, int size, int index) {
    // 把索引 index 之后的所有元素向前移动一位
    for (int i = index; i < size - 1; i++) {
        nums[i] = nums[i + 1];
    }
}
```

总的来说，数组的插入与删除操作有以下缺点：

* 时间复杂度高：$O(n)$
* 丢失元素
* 内存浪费



### （5）遍历数组

```cpp
/* 遍历数组 */
void traverse(int *nums, int size) {
    int count = 0;
    // 通过索引遍历数组
    for (int i = 0; i < size; i++) {
        count++;
    }
}
```

```py
def traverse(nums: list[int]):
    """遍历数组"""
    count = 0
    # 通过索引遍历数组
    for i in range(len(nums)):
        count += 1
    # 直接遍历数组
    for num in nums:
        count += 1
    # 同时遍历数据索引和元素
    for i, num in enumerate(nums):
        count += 1
```



### （6）查找元素

数组中查找指定元素通常要遍历数组，又因为数组是线性数据结构，故查找操作又被称为“线性查找”

```cpp
int find(int *nums, int size, int target) {
    for (int i = 0; i < size; i++) {
        if (nums[i] == target)
            return i;
    }
    return -1;
}
```



### （7）扩容数组

在大多数编程语言中，数组的长度是不可变的，如果我们希望扩容数组，则需要重新建立一个更大的数组，并把原数组元素依次拷贝到新数组，这是一个O(n)的操作

```cpp
int *extend(int *nums, int size, int enlarge) {
    // 初始化一个扩展长度后的数组
    int *res = new int[size + enlarge];
    // 将原数组中的所有元素复制到新数组
    for (int i = 0; i < size; i++) {
        res[i] = nums[i];
    }
    // 释放内存
    delete[] nums;
    // 返回扩展后的新数组
    return res;
}
```



## 2.数组优点与局限性

优点：

* 空间效率高：分配连续的内存块，无需额外的结构开销
* 支持随机访问：$O(1)$时间内访问任何元素
* 缓存局部性：访问数组元素时，计算机不仅会加载他，还会缓存其周围的数据，借助高速缓存来提升后续操作的执行速度

缺点：

* 插入与删除效率低：当数组中元素较多时
* 长度不可变：若要扩容，则开销很大
* 空间浪费：如果数组分配的大小超过了实际所需，那么多余的空间就被浪费了



## 3.数组典型应用

* 随机访问：随机抽取样本
* 排序和搜索：快速排序，归并排序，二分查找
* 查找表：快速查找一个元素或一个元素的对应关系
* 机器学习：神经网络中使用了大量的向量，矩阵，张量之间的线性代数运算，而数组是最常用的结构
* 数据结构实现：实现栈，队列，哈希表，堆，图等数据结构