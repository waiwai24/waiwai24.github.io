# 空间复杂度

> `空间复杂度 space complexity`用于衡量算法占用内存空间随着数据量变大时的增长趋势。这个概念与时间复杂度非常类似，只需将“运行时间”替换为“占用内存空间”



## 1.算法的相关空间

算法运行时使用的内存空间主要有以下几种：

* 输入空间
* 暂存空间：
  * 暂存数据：存储运行过程中的常量，变量，对象等
  * 栈帧空间：保存调用函数的上下文数据。系统在每次调用函数时都会在栈顶部创建一个栈帧，函数返回后，栈帧空间会被释放
  * 指令空间：保存编译后的程序指令，在实际统计中通常忽略不计
* 输出空间

在分析一段程序的空间复杂度时，通常统计暂存数据，栈帧数据和输出数据三部分



## 2.推算方法

### （1）以最差输入数据为准

当 𝑛 < 10 时，空间复杂度为 𝑂(1) ；但当 𝑛 > 10 时，初始化的数组 nums 占 用 𝑂(𝑛) 空间；因此最差空间复杂度为 𝑂(𝑛) 。

### （2）以算法运行中的峰值内存为准

例如，程序在执行最后一行之前，占用 𝑂(1) 空间；当初始化数组 nums 时，程序占用 𝑂(𝑛) 空间；因此最差空间复杂度为 𝑂(𝑛) 

### （3）递归函数中注意统计栈帧空间



## 3.常见类型

𝑂(1) < 𝑂(log 𝑛) < 𝑂(𝑛) < 𝑂(𝑛^2^ ) < 𝑂(2^𝑛^) 

常数阶 < 对数阶 < 线性阶 < 平方阶 < 指数阶

### （1）常数阶

常见于数量与输入数据大小n无关的常量，变量，对象

注意：循环中初始化变量或调用函数而占用的内存，进入下一循环后就会被释放，因此不会累计占用空间，空间复杂度仍为𝑂(1)

### （2）线性阶

常见于元素数量与n成正比的数组，链表，栈，队列

### （3）平方阶

常见于矩阵和图

### （4）指数阶

常见于二叉树

### （5）对数阶

常见于分治算法



## 4.权衡时间空间

理想情况下，我们希望算法的时间复杂度和空间复杂度都达到最优，但在实际情况中，同时优化这两者是十分困难的

降低时间复杂度通常要以提升空间复杂度为代价，反之亦然，选择哪种思路取决于我们更看重哪个方面